[gcode_macro LIST_OBJECTS]
gcode:
    {% if printer.exclude_objects.objects is defined %}
        {action_respond_info("Please select an object: " % printer.exclude_objects.objects )}
    {% else %}
        {action_respond_info("No objects are defined.\nPlease ensure a print has started and is properly labeled." )}
    {% endif %}

[gcode_macro SELECT_OBJECT]
gcode:
    {% set object = params.OBJECT|upper %}
    {% if object is not defined %}
        {action_respond_info("No object specified." )}
    {% else %}
        {% if printer.exclude_objects.objects is defined %}
            {% set platter = printer.exclude_objects.objects %}
            {% for i in range( 1 + platter.length ) %}
                {% if platter[i].name != object %}
                    EXCLUDE_OBJECT NAME={platter[i].name}
                {% else %}
                    {% set object_found = True %}
                {% endif %}
            {% endfor %}
            {% if object_found != True %}
                {action_raise_errpr("Fatal Error: Object not found." )}
            {% endif %}
        {% else %}
            {action_respond_info("No objects are defined.\nPlease ensure a print has started and is properly labeled." )}
        {% endif %}
    {% endif %}

[gcode_macro PARAMABAM]
variable_color: ''
gcode:
    {% if params.COLOR is defined %}
        {% set color = params.COLOR|upper %}
        SET_GCODE_VARIABLE MACRO=PARAMABAM VARIABLE=color VALUE={color}
        {action_respond_info("Color: " % color )}
    {% else %}
        {action_respond_info("Please provide 'COLOR' parameter" )}
    {% endif %}